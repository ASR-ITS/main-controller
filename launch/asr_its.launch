<?xml version="1.0"?>
<launch>

    <!-- Run Robot Controller Node -->
    <include file="$(find main_controller)/launch/controller.launch"/>

    <!-- Run the map server -->
    <arg name="map_file" default="$(find path_planner)/maps/map_amcl.yaml"/>
    <node name="map_server" pkg="map_server" type="map_server" args="$(arg map_file)" />

    <!-- Run the costmap node -->
    <!-- <node name="costmap_node" pkg="costmap_2d" type="costmap_2d_node" >
        <rosparam file="$(find main_controller)/config/global_costmap_params.yaml" command="load" ns="costmap" />
    </node> -->

    <!-- Run Odom node -->
    <!-- <node pkg="main_controller" type="tf_broadcaster_node" name="odom_to_base_broadcaster_node" /> -->
    <include file="$(find main_controller)/launch/icp_odom.launch" />
    <!-- <include file="$(find main_controller)/launch/ekf.launch" /> -->
    
    <!-- Run Lidar Node -->
    <include file="$(find rplidar_ros)/launch/rplidar.launch" />
    <node pkg="tf" type="static_transform_publisher" name="base_to_laser_broadcaster_node" args="0.12 0 0 3.4 0 0 base_link laser 50"/>

    <!-- Run AMCL Node -->
    <include file="$(find main_controller)/launch/amcl.launch" />
    <node pkg="rviz" type="rviz" name="rviz" args="-d $(find main_controller)/config/rviz.config.rviz"/>

    <!-- Run Path Planning -->
    <!-- <node name="astar_node" pkg="path_planner" type="path_planner.py" output="screen"/> -->
    
</launch>
